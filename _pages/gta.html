---
layout: gta
permalink: gta
---
<form onsubmit="makeCorsRequest()">
<input type="text" id="x"><br/>
<button onclick="makeCorsRequest()">â‡©</button><br/>
<span id="y"></span>
</form>

<script>

function createCORSRequest(method, url) {
  var xhr = new XMLHttpRequest();
  if ("withCredentials" in xhr) {
    xhr.open(method, url, true);
  } else if (typeof XDomainRequest != "undefined") {
    xhr = new XDomainRequest();
    xhr.open(method, url);
  } else {
    xhr = null;
  }
  return xhr;
}

function addCommas(number) {
	return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function makeCorsRequest() {
  event.preventDefault();
  var x = document.getElementById('x').value;
  console.log(x);
  var url = 'http://localhost:5000/?x=' + x;
  var xhr = createCORSRequest('GET', url);
  if (!xhr) {
    alert('CORS not supported');
    return;
  }

  xhr.onload = function() {
    var response = xhr.responseText;
    var data = JSON.parse(response);
    document.getElementById("y").innerHTML = addCommas(data.y);
  };

  xhr.onerror = function() {
    console.log('youtube stats update failed.');
  };

  xhr.send();
}

document.getElementById("x").focus();
</script>